# Implementation Documentation

μ΄ ν΄λ”λ” PACS Extension Serverμ μ£Όμ” κΈ°λ¥ κµ¬ν„μ— λ€ν• μƒμ„Έν• λ¬Έμ„λ¥Ό ν¬ν•¨ν•©λ‹λ‹¤.

## π“ ν΄λ” κµ¬μ΅°

### 1. measurement_values/
μ–΄λ…Έν…μ΄μ… μ‹μ¤ν…μ— κµ¬μ΅°ν™”λ μΈ΅μ • λ°μ΄ν„°λ¥Ό μ €μ¥ν•λ” `measurement_values` JSONB ν•„λ“ μ¶”κ°€ κΈ°λ¥

- **plan.md**: κµ¬ν„ κ³„νμ„
- **implementation.md**: μ‹¤μ  κµ¬ν„ κ²°κ³Ό λ° μƒμ„Έ λ‚΄μ©

**μ£Όμ” κΈ°λ¥**:
- JSONB ν•νƒμ μΈ΅μ •κ°’ μ €μ¥
- λ‹¤μ–‘ν• μΈ΅μ • νƒ€μ… μ§€μ› (raw, mean, stddev λ“±)
- APIλ¥Ό ν†µν• μΈ΅μ •κ°’ μƒμ„±/μμ •/μ΅°ν
- GIN μΈλ±μ¤λ¥Ό ν†µν• ν¨μ¨μ μΈ JSONB μΏΌλ¦¬

### 2. viewer_software_filtering/
μ–΄λ…Έν…μ΄μ… λ©λ΅ μ΅°ν μ‹ λ·°μ–΄ μ†ν”„νΈμ›¨μ–΄λ΅ ν•„ν„°λ§ν•λ” κΈ°λ¥

- **plan.md**: κµ¬ν„ κ³„νμ„
- **implementation.md**: μ‹¤μ  κµ¬ν„ κ²°κ³Ό λ° μƒμ„Έ λ‚΄μ©

**μ£Όμ” κΈ°λ¥**:
- λ·°μ–΄ μ†ν”„νΈμ›¨μ–΄λ³„ μ–΄λ…Έν…μ΄μ… ν•„ν„°λ§
- λ‹¤μ–‘ν• ν•„ν„°λ§ μ΅°ν•© μ§€μ› (user + viewer, project + viewer, study + viewer)
- OHIF, DICOM, Cornerstone λ“± λ‹¤μ–‘ν• λ·°μ–΄ μ§€μ›

### 3. datetime_fixes/
PostgreSQL TIMESTAMPTZ νƒ€μ…κ³Όμ νΈν™μ„±μ„ μ„ν• DateTime νƒ€μ… μμ • μ‘μ—…

- **plan.md**: μμ • κ³„νμ„
- **implementation.md**: μ‹¤μ  μμ • κ²°κ³Ό λ° μƒμ„Έ λ‚΄μ©

**μ£Όμ” μμ •μ‚¬ν•­**:
- NaiveDateTime β†’ DateTime<Utc> λ§μ΄κ·Έλ μ΄μ…
- PostgreSQL TIMESTAMPTZ νΈν™μ„± ν™•λ³΄
- ν…μ¤νΈ μ½”λ“μ DateTime μ΄κΈ°ν™” λ°©μ‹ κ°μ„ 

## π€ κµ¬ν„λ κΈ°λ¥λ“¤

### β… Measurement Values (v1.0.0-beta.5)
- λ°μ΄ν„°λ² μ΄μ¤ μ¤ν‚¤λ§: `measurement_values` JSONB μ»¬λΌ μ¶”κ°€
- μ—”ν‹°ν‹°/DTO: λ¨λ“  μ–΄λ…Έν…μ΄μ… κ΄€λ ¨ κµ¬μ΅°μ²΄μ— ν•„λ“ μ¶”κ°€
- Repository/Service: μΈ΅μ •κ°’ μ²λ¦¬ λ΅μ§ κµ¬ν„
- API: μƒμ„±/μμ •/μ΅°ν μ—”λ“ν¬μΈνΈ μ§€μ›
- ν…μ¤νΈ: ν¬κ΄„μ μΈ λ‹¨μ„/ν†µν•© ν…μ¤νΈ

### β… Viewer Software Filtering (v1.0.0-beta.5)
- λ°μ΄ν„°λ² μ΄μ¤ μ¤ν‚¤λ§: `viewer_software` VARCHAR μ»¬λΌ μ¶”κ°€
- ν•„ν„°λ§: μ‚¬μ©μ/ν”„λ΅μ νΈ/Studyλ³„ λ·°μ–΄ μ†ν”„νΈμ›¨μ–΄ ν•„ν„°λ§
- API: μΏΌλ¦¬ νλΌλ―Έν„°λ¥Ό ν†µν• κ³ κΈ‰ ν•„ν„°λ§
- ν…μ¤νΈ: λ‹¤μ–‘ν• ν•„ν„°λ§ μ‹λ‚λ¦¬μ¤ ν…μ¤νΈ

### β… DateTime Type Compatibility (v1.0.0-beta.5)
- νƒ€μ… ν†µμΌ: λ¨λ“  DateTime ν•„λ“λ¥Ό `DateTime<Utc>`λ΅ ν†µμΌ
- νΈν™μ„±: PostgreSQL TIMESTAMPTZμ™€ μ™„μ „ νΈν™
- ν…μ¤νΈ: μ•μ •μ μΈ DateTime μ²λ¦¬ ν…μ¤νΈ

## π“ ν…μ¤νΈ κ²°κ³Ό

- **μ΄ ν…μ¤νΈ**: 10κ° μ–΄λ…Έν…μ΄μ… ν…μ¤νΈ
- **ν†µκ³Όμ¨**: 100% (10/10)
- **μ»¤λ²„λ¦¬μ§€**: μƒμ„±, μμ •, μ΅°ν, ν•„ν„°λ§ λ¨λ“  κΈ°λ¥

## π”„ λ²„μ „ νμ¤ν† λ¦¬

- **v1.0.0-beta.5** (2025-01-18): Measurement Values + Viewer Software Filtering + DateTime Fixes
- **v1.0.0-beta.4** (2025-01-27): μ΄κΈ° Measurement Values κΈ°λ¥

## π“ λ¬Έμ„ μ‘μ„± κ°€μ΄λ“

κ° κΈ°λ¥λ³„ ν΄λ”μ—λ” λ‹¤μ λ‘ λ¬Έμ„κ°€ ν¬ν•¨λ©λ‹λ‹¤:

1. **plan.md**: κµ¬ν„ μ „ κ³„νμ„
   - κΈ°λ¥ κ°μ”
   - κ³„νλ μ‘μ—… λ©λ΅
   - μμƒ λ¬Έμ μ 
   - κ²€μ¦ μ‚¬ν•­

2. **implementation.md**: κµ¬ν„ ν›„ κ²°κ³Όμ„
   - μ‹¤μ  κµ¬ν„λ μ‘μ—… λ©λ΅
   - ν•΄κ²°λ λ¬Έμ λ“¤
   - ν…μ¤νΈ κ²°κ³Ό
   - API μ‚¬μ© μμ‹
   - κΈ°μ μ  κ°μ„ μ‚¬ν•­

μ΄ κµ¬μ΅°λ¥Ό ν†µν•΄ κ° κΈ°λ¥μ κ³„νλ¶€ν„° κµ¬ν„κΉμ§€μ μ „μ²΄ κ³Όμ •μ„ μ¶”μ ν•  μ μμµλ‹λ‹¤.
